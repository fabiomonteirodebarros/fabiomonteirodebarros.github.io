var VideoRichHoverHandler,VideoRichHover;(function(n){function fr(n,t){pi&&(!t||!t.bindInfos||t.bindInfos.length<1||(u[n]=t,t.isAsyncBind&&sj_evt.bind(ci,er),wi=t.bh,kt(t)))}function er(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)kt(u[i]?u[i]:null);else kt(u[t]?u[t]:null)}function kt(n){var e,f,r,o,s,h,i,c,u,t;if(n!=null&&(e=ki(n),e!=null&&!(e.length<1))){f=null;switch(n.hmte){case VRHEnums.HoverMouseTriggerEvent.MouseOver:f="mouseover";break;case VRHEnums.HoverMouseTriggerEvent.MouseMove:default:f="mousemove"}for(t=0;t<e.length;t++)if(r=e[t],r!==null&&r.elements!==null&&r.targetInfo!==null)for(o=r.targetInfo,s=0;s<r.elements.length;s++)if((h=r.elements[s],i=dt(h,o),i)&&(c=sr(n),!hr(i)))switch(c){case VRHEnums.HoverPlayType.BackgroundPlay:i.setAttribute(tt,null);break;case VRHEnums.HoverPlayType.HoverLoopPlay:i.setAttribute(lt,null);l(i,f,su,!1,!1);bi(i,h,n,o);break;case VRHEnums.HoverPlayType.HoverPlay:i.setAttribute(ct,null);l(i,f,ou,!1,!1);bi(i,h,n,o);break;case VRHEnums.HoverPlayType.Null:i.setAttribute(ct,null)}if(n.enHoverAsyncMeta&&(u=vr(n),u&&u.length>0))for(t=0;t<u.length;t++)u[t]&&(n.autoRetriveMetaMaxCount&&n.autoRetriveMetaMaxCount>0&&t<n.autoRetriveMetaMaxCount&&et(u[t],null,null),l(u[t],f,eu,!1,!1));l(_w,"focus",pr,!0);wi||l(_w,"blur",br,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",pu,!0)}}function bi(n,t,i,u){if(l(n,"touchstart",fu,!1,!1),l(t,"mouseout",nr,!1,!1),i.entabhover===!0){var f=lr(n,u);f&&l(f,"focus",wr,!1,!1)}i.isBoundarySizePersisted&&t.setAttribute(r.BoundarySizePersistedAttachedStr,null);i.enBoundarySizeScale&&t.setAttribute(r.BoundarySizeScaleAttachedStr,null)}function et(n,i,r){var l,a,f,h,v,c,o,p,b;if(n&&(f=y(n),f)){if(s(f,it)&&s(f,d)){i!=null&&r&&r(n,i);return}if(h=parseInt(t(f,ui)),isNaN(h)&&(h=1),!s(f,it)&&h>0){if(v=(l=t(f,w))!==null&&l!==void 0?l:t(f,e+w),!v)return;if(c=u[v],!c||!c.metauf)return;if(o=sj_gx(),!o)return;pt(f,it);o.onreadystatechange=function(){if(4==o.readyState){var t=or(f,200==o.status?o.responseText:"");t?s(f,d)&&i!=null&&r&&r(n,i,0):(h-=1,yt(f,ui,h),wt(f,it),et(n,i,r))}};p=(a=t(f,"mid"))!==null&&a!==void 0?a:t(f,e+"mid");p&&(b=ai(c.metauf,p),o.open("GET",b,!0),o.send(null))}}}function or(n,i){var f,r,s,u;if(!n||!i)return!1;if(typeof VideoRichHoverTestUtils!=a&&typeof VideoRichHoverTestUtils.removeInstLogIfPresent=="function"&&(i=VideoRichHoverTestUtils.removeInstLogIfPresent(i)),r="",o(n,c))r=c;else if(o(n,e+c))r=e+c;else return!1;if(s=t(n,r),!s||s!=i){u=null;try{if(u=JSON.parse(i),!u)return!1;yt(n,r,JSON.stringify((f=u.videoResult)!==null&&f!==void 0?f:u))}catch(h){return!1}return!0}return!1}function sr(n){var t=VRHEnums.HoverPlayType.Null;return n.enBgPlay?t=VRHEnums.HoverPlayType.BackgroundPlay:n.enHoverControl&&(t=n.enLoopPlayOnHover?VRHEnums.HoverPlayType.HoverLoopPlay:VRHEnums.HoverPlayType.HoverPlay),t}function hr(n){return n==null?!0:t(n,ct)||t(n,tt)||t(n,lt)}function cr(n){var t=Array(),c,r,f,i,s,h;for(c in u)r=u[c],r&&(n&&r.enAutoPlayOnLoad||r.enAutoPlayNext)&&(f=ki(r),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++){var l=t[i].targetInfo,e=t[i].elements,a=t[i].targetProperties;if(l!==null&&e!==null&&!(e.length<1))for(s=0;s<e.length;s++)if((h=dt(e[s],l,a.hoverMetaRequired),h!==null)&&!o(h,ri))return h}return null}function lr(n,t){var r,i;if(!t||!n)return null;if(s(n,t.tcn)){if(r=t.ttcn,!r||r.length<1)return null;i=n;do{if(i&&s(i,r))return i;i=i.parentElement}while(i&&i!=_d.body);return null}return null}function ar(n){var u,t,f,r;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var e=n.bindInfos[t].id,i=n.bindInfos[t].target,o={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};e&&i&&i.tcn&&i.ttcn&&(f=_ge(e),f&&(r=v(i.ttcn,f),r&&r.length>0&&u.push({targetInfo:i,elements:r,targetProperties:o})))}return u}function ki(n){var u,i,o,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var e=n.bindInfos[t].id,r=n.bindInfos[t].target,s={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};if(e&&r&&r.bcn&&r.tcn&&(i=null,n.useClassAsTargetInfoKey?i=v(e,_d):(o=_ge(e),o&&(i=[],i.push(o))),i&&i.length>0))for(t=0;t<i.length;t++)f=v(r.bcn,i[t]),f&&f.length>0&&u.push({targetInfo:r,elements:f,targetProperties:s})}return u.length>0?u:null}function vr(n){var r,u,f,i,o,t,e;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(r=[],t=0;t<n.bindInfos.length;t++)if(u=n.bindInfos[t].id,f=n.bindInfos[t].target,u&&f&&f.marc&&(i=null,n.useClassAsTargetInfoKey?i=v(u,_d):(o=_ge(u),o&&(i=[],i.push(o))),i&&i.length>0))for(t=0;t<i.length;t++)e=v(f.marc,i[t]),e&&e.length>0&&(r=r.concat.apply(r,e));return r.length>0?r:null}function dt(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=ni(n,c),u))?(f=t.tcn===t.bcn?n:ut(t.tcn,n),i)?(r=ti(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function yr(n){var t=Array(),c,o,f,i,s,r,e,h;for(c in u)o=u[c],o&&(f=ar(o),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++)if(s=t[i].targetInfo,r=t[i].elements,s!==null&&r!==null&&!(r.length<1))for(e=0;e<r.length;e++)if(r[e]==n&&(h=dt(n,s,!1),h!==null))return h;return null}function gt(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function ot(n){var r,i,f,o;return n?(i=y(n),!i)?!1:(f=(r=t(i,w))!==null&&r!==void 0?r:t(i,e+w),!f)?!1:(o=u[f],!o)?!1:!!o.enHoverAsyncMeta:!1}function pr(){gt(r.HoverEnableEvt)}function wr(n){var i=sj_et(n),t=yr(i);t&&(ot(t)?st(t,VRHEnums.TriggerType.TabTrigger):nt(t,VRHEnums.TriggerType.TabTrigger),ft=!0)}function br(){_d.activeElement!=null&&(_d.activeElement==sj_b||di(_d.activeElement)?gt(r.HoverEnableEvt):(k(),gt(r.HoverDisableEvt)))}function y(n){for(var t=n,i;t!=null;){if(i=ni(t,c),i)return i;if(s(t,at))return y(f);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function ni(n,t){var i,r;if(n){if(o(n,t)===!0||o(n,e+t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=ni(n.children[i],t),r)return r}return null}function kr(n,t,i){for(var r=n;r;){if(r.id==i)return null;if(s(r,t))return r;r=r.parentElement}return null}function dr(n,t){var i=_ge(n);return i==null?null:ut(t,i)}function gr(n,t){return h(n,t,VRHEnums.HoverTargetType.Boundary)}function nu(n,t){return h(n,t,VRHEnums.HoverTargetType.Target)}function h(n,t,i){var s,h,e;if(n&&t&&(s=u[t]?u[t].bindInfos:null,s&&s.length>0))for(h=0;h<s.length;h++){var r=s[h],f=null,o=null,c=null,l=!1;switch(i){case VRHEnums.HoverTargetType.Boundary:f=r.target.bcn;break;case VRHEnums.HoverTargetType.CaptionSource:f=r.target.bcn;c=r.target.cscn;l=!0;break;case VRHEnums.HoverTargetType.Target:f=r.target.tcn;break;case VRHEnums.HoverTargetType.PlayerBoundary:f=r.target.pbcn;o=r.target.ppid;break;case VRHEnums.HoverTargetType.MMSTBoundary:f=r.target.mbcn;o=r.target.mpid;break;case VRHEnums.HoverTargetType.CaptionTarget:f=r.target.ctcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.LinkTarget:f=r.target.ltcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.ScaleCanvas:return _ge(r.target.scid);case VRHEnums.HoverTargetType.DuplicateSource:f=r.target.dscn;break;case VRHEnums.HoverTargetType.DuplicateTarget:return _ge(r.target.dtid)}if(f&&(e=null,o!=null?e=dr(o,f):(e=kr(n,f,r.id),e&&l&&(e=c!=null?ut(c,e):null)),e))return e}return null}function di(n){return yi(at,n)!=null}function tu(n,t){var i=[],r;if(_d.elementsFromPoint?i=_d.elementsFromPoint(n,t):_d.msElementsFromPoint&&(i=_d.msElementsFromPoint(n,t)),(i===null||i===void 0?void 0:i.length)>0)for(r=0;r<i.length;r++)if(s(i[r],at))return!0;return!1}function ti(n){var f,u=null,r=null,o=null,s=(f=t(n,c))!==null&&f!==void 0?f:t(n,e+c),i;if(!s)return null;try{u=iu(n);u||(i=JSON.parse(s),r=i.capt,r&&(o={de:r.de,filterUrlFormat:null,pu:r.pu,puid:r.puid,pud:r.pud,r:r.r,s:r.s,sk:r.sk,t:i.vt,vc:r.vc,actkeylst:r.actkeylst,actpayload:r.actpayload,saved:r.saved,du:i.du}),u={ma:!!(i.bv&2),at:!!(i.bv&4),capt:o,cc:i.cc,cid:i.cid,ct:i.ct,du:i.du,md5:i.md5,mid:i.mid,mmsturl:i.mmsturl,paid:!!(i.bv&1),purl:i.purl,smturl:i.smturl,thid:i.thid,vt:i.vt,bci:i.bci,murl:i.murl,sab:!!(i.bv&8),pgurl:i.pgurl,q:i.q,el:!!(i.bv&16),reid:i.reid})}catch(h){u=null}return u}function iu(n){var s,h,l,a,v,y,p,r=(s=t(n,w))!==null&&s!==void 0?s:t(n,e+w),k=(h=t(n,c))!==null&&h!==void 0?h:t(n,e+c),f,o,i,b;return!r||!k?null:(f=u[r],!f)?null:(o=(a=(l=t(n,"mid"))!==null&&l!==void 0?l:t(n,e+"mid"))===null||a===void 0?void 0:a.toUpperCase(),!o)?null:(i=JSON.parse(k),!i)?null:(b=!!((v=t(n,fi))!==null&&v!==void 0?v:t(n,e+fi)),o===((y=i.videoId)===null||y===void 0?void 0:y.toUpperCase()))?uu(i,f,r,b):o===((p=i.mid)===null||p===void 0?void 0:p.toUpperCase())?ru(i,f,r,b):null}function ru(n,t,i,r){var u=n.capt,f;return u&&(f={de:u.de,filterUrlFormat:null,pu:u.pu,puid:u.puid,pud:u.pud,r:u.r,s:u.s,sk:u.sk,t:n.vt,vc:u.vc,actkeylst:u.actkeylst,actpayload:u.actpayload,saved:u.saved,du:n.du}),{ma:!!n.ma,at:!!n.at,capt:f,cc:n.cc,cid:i,ct:n.ct,du:n.du,md5:n.md5,mid:n.mid,mmsturl:n.mmsturl,paid:!!n.paid,purl:n.purl,smturl:n.smturl,thid:n.thid,vt:n.vt,bci:n.bci,murl:n.murl,sab:r,pgurl:n.pgurl,q:n.q,el:t.enLoopPlay,reid:n.reid}}function uu(n,t,i,r){var f,e,u=(f=n.publisher)===null||f===void 0?void 0:f[0],o={de:n.description,filterUrlFormat:null,pu:u===null||u===void 0?void 0:u.name,puid:u===null||u===void 0?void 0:u.name,pud:n.datePublished,r:null,s:null,sk:null,t:n.title,vc:(e=n.viewCount)===null||e===void 0?void 0:e.toString(),actkeylst:null,actpayload:null,saved:!1,du:n.duration};return{ma:!!n.isAdult,at:!!n.isAdult,capt:o,cc:p.getClipsCountFromVideoResult(n),cid:i,ct:p.getClipsTimelineFromVideoResult(n),du:n.duration,md5:n.videoId,mid:n.videoId,mmsturl:p.getThumbnailUrlFromVideoResult(n,"MultiMotionStatic",n.isAdult,t.pid),paid:!!!n.isAccessibleForFree,purl:n.hostPageUrl,smturl:p.getThumbnailUrlFromVideoResult(n,"MultiMotion",n.isAdult,t.pid),thid:p.getThumbnailIdFromVideoResult(n,"Large"),vt:n.title,bci:0,murl:n.contentUrl,sab:r,pgurl:n.hostPageUrl,q:vi("q"),el:t.enLoopPlay,reid:null}}function fu(n){var t=sj_et(n);rt=t;sb_st(function(){rt=null},500)}function eu(n){var t=sj_et(n);t&&et(t,null,null)}function ou(n){var t=sj_et(n);rt!=t&&(ot(t)?st(t,VRHEnums.TriggerType.MouseTrigger):nt(t,VRHEnums.TriggerType.MouseTrigger),ft=!0)}function su(n){var t=sj_et(n);rt!=t&&(ot(t)?st(t,VRHEnums.TriggerType.HoverLoopPlayTrigger):nt(t,VRHEnums.TriggerType.HoverLoopPlayTrigger),ft=!0)}function st(n,t){if(n){var i=y(n);i&&(pt(i,d),et(n,t,nt))}}function nt(n,i,r){var c,u,a,e,s,v,p,l,d;if(r===void 0&&(r=-1),c=y(n),!c){f&&k();return}if((u=ti(c),u&&u.cid)&&(a=nu(n,u.cid),a!==f)&&(o(a,tt)||(f=a),e=parseInt(t(c,"ht")),e||(e=0),!(e>=0)||!(e<b.length)||b[e]!==!1)&&(s=gr(n,u.cid),s)){var w=h(n,u.cid,VRHEnums.HoverTargetType.PlayerBoundary),rt=h(n,u.cid,VRHEnums.HoverTargetType.MMSTBoundary),ut=h(n,u.cid,VRHEnums.HoverTargetType.CaptionSource),ft=h(n,u.cid,VRHEnums.HoverTargetType.CaptionTarget),et=h(n,u.cid,VRHEnums.HoverTargetType.LinkTarget),ot=h(n,u.cid,VRHEnums.HoverTargetType.ScaleCanvas),st=h(n,u.cid,VRHEnums.HoverTargetType.DuplicateSource),ht=h(n,u.cid,VRHEnums.HoverTargetType.DuplicateTarget),g=null;if(w!=null&&(v=w.getElementsByClassName(ur),v&&v.length>0&&(p=v[0].getElementsByTagName("img"),p&&p.length>0&&(g=p[0]))),l=s.getElementsByTagName("img"),l&&l.length>0){var ct=l[0].clientHeight,lt=l[0].clientWidth,nt=s.clientWidth,it=s.clientHeight;u.capt&&u.capt.sk&&(u.capt.sk=cu(s));d={containerId:u.cid,containerHeight:it,containerWidth:nt,hoverType:e,thumbnailHeight:Math.min(it,ct),thumbnailWidth:Math.min(nt,lt),videoRichHoverMetaData:u,instMetaData:null,hoveredElement:s,triggerType:i,playerTargetEl:w,mmstTargetEl:rt,captionSourceEl:ut,captionTargetEl:ft,linkTargetEl:et,playerThumbnailEl:g,scaledCanvasEl:ot,duplicateSourceEl:st,duplicateTargetEl:ht,hoverDelayMsOverwrite:r};bt&&(vt=bt(c,e,u.cid),d.instMetaData=vt);sj_evt.fire(hi,d,s,hu(u))}}}function hu(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function cu(n){var t,u,f,e,i,r;if(!n)return null;if(t=v("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=li(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function gi(){f!==null&&(f=null,vt=null)}function nr(n){var t,i;tu(n.clientX,n.clientY)||(t=y(sj_et(n)),t&&s(t,d)&&wt(t,d),f&&!o(f,lt))&&(i=tr(sj_mo(n)),i!==tr(f)&&f&&k())}function tr(n){var r,e,t,i;return typeof u==a||!u?null:(di(n)&&(n=f),r=y(n),e=null,r&&(t=ti(r),t&&(i=u[t.cid],typeof i!=a&&i&&(e=h(n,t.cid,i.hmot)))),e)}function k(){f&&o(f,tt)||(g&&bu(),sj_evt.fire(r.HoverCancelEvt),gi())}function lu(n){n&&n.length>1?nr(n[1]):f&&k()}function au(n,i,r){for(var s="h",h="data-h",u,f,e,c;n!=null;){if((o(n,s)||o(n,h))&&(u=t(n,s)||t(n,h),u&&(f=u.match(/ID=[\w]+(\.[\w]+)*(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),f)))return e=f[0].substr(3).split(","),c={AppNS:e[0],K:e[1],HoverType:i,HoverContainerId:r},c;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return null}function vu(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<b.length&&t>=0&&(b[t]=!0)}}function yu(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<b.length&&t>=0&&(b[t]=!1)}}function pu(){ii(!0)}function ir(){ii(!1)}function ii(n){if(!ft&&!g){g=!0;var t=cr(n);ot(t)?st(t,VRHEnums.TriggerType.AutoplayTrigger):nt(t,VRHEnums.TriggerType.AutoplayTrigger)}}function rr(){g&&(k(),ii(!1))}function wu(n){if(n&&!(n.length<2)){var t=n[1];t?(sj_evt.bind(r.AutoPlayNext,ir),sj_evt.bind(r.FallbackToNonSMTEvt,rr)):(sj_evt.unbind(r.AutoPlayNext,ir),sj_evt.unbind(r.FallbackToNonSMTEvt,rr))}}function bu(){f!==null&&f.setAttribute(ri,null);g=!1}function ku(){i&&i.gebc&&i.ha&&i.ga&&i.sa&&i.hc&&i.ac&&i.rc&&i.sf&&i.gaebc&&i.qsv&&p&&r&&ht&&ht.bind&&(o=i.ha,v=i.gebc,t=i.ga,yt=i.sa,s=i.hc,li=i.gcn,pt=i.ac,wt=i.rc,ai=i.sf,vi=i.qsv,yi=i.gaebc,ut=i.gfbc,l=ht.bind,oi=r.HoverDisableEvt,ei=r.HoverEnableEvt,hi=r.HoverMouseInEvt,si=r.HoverStopEvt,bt=au,ci=r.HoverAsyncBindEvt,f=null,sj_evt.bind(r.PlayerEndEvt,k),sj_evt.bind(r.HoverCleanupEvt,gi),sj_evt.bind(r.AutoPlayNextStatusUpdateEvt,wu),sj_evt.bind(si,lu),sj_evt.bind(ei,vu),sj_evt.bind(oi,yu),pi=!0)}var a="undefined",i=typeof pMMUtils!=a?pMMUtils:null,p=typeof VideoRichHoverUtils!=a?VideoRichHoverUtils:null,ht=typeof SmartEvent!=a?SmartEvent:null,r=typeof VRHConsts!=a?VRHConsts:null,ct="vrhatt",lt="hapatt",tt="bpatt",ri="apEnd",c="vrhm",at="vrhc",ur="cico",w="hcid",ui="rt",it="retrieved",fi="sab",d="onhov",e="data-",f=null,rt=null,vt=null,ei=null,oi=null,si=null,hi=null,ci=null,b=[!0,!0],o=null,t=null,yt=null,v=null,s=null,li=null,pt=null,wt=null,ai=null,vi=null,l=null,ut=null,yi=null,bt,pi=!1,u={},wi=!1,ft=!1,g=!1;n.init=fr;ku()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function rr(){u&&r&&ct&&ii&&!ri&&(lt=ii.bind,rt=u.ga,ui=u.ha,l=u.sa,yt=u.gcn,ir=u.sc,g=u.hc,pt=u.sp,wt=u.goh,ut=u.gow,fi=u.go,a=u.gfbc,ei=u.gaebc,si=u.sw,hi=u.sl,w=u.ac,v=u.rc,ft=ct.updateTargetBySource,bt=ct.showElement,oi=ct.getOffsetWithScroll,fr(),ri=!0,sj_evt.fire(r.HoverReadyEvt))}function ur(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(nt[t]||(nt[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=e&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n))}function fr(){sj_evt.bind(r.HoverMouseInEvt,wr);sj_evt.bind(r.PlayerLoadEvt,er);sj_evt.bind(r.PlayerStartEvt,or);sj_evt.bind(r.PlayerEndEvt,li);sj_evt.bind(r.PlayerErrEvt,li);sj_evt.bind(r.HoverCancelEvt,vr);sj_evt.bind(r.HoverMMSTShowEvt,iu);sj_evt.bind(r.HoverMMSTHideEvt,yi)}function ci(n){return n&&n.length>2&&n[2]===ht}function er(){}function or(n){ci(n)&&sj_evt.fire(r.CaptionHideEvt,n[1])}function li(n){ci(n)&&(st(),sj_evt.fire(r.AutoPlayNext))}function sr(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function ai(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function hr(n){var pt,k,v,li,st,ri,u,ct,yi,pi,ut,wi,lt,at,tt,it,fi,vt;if(n&&(k=n.containerId,v=nt[k],v)&&(v.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=v.chflturl),v.tw&&(n.containerWidth=n.thumbnailWidth=v.tw),v.th&&(n.containerHeight=n.thumbnailHeight=v.th),c=_ge(k),c&&c.attributes)){var wt=v.interactionType===VRHEnums.HoverInteractionType.Inline,g=wt?n.containerWidth:n.thumbnailWidth,ki=wt?n.containerHeight:n.thumbnailHeight;h=n.playerTargetEl;var et=n.mmstTargetEl,d=n.captionTargetEl,ei=h!=null?h.clientWidth:g,di=h!=null?h.clientHeight:n.thumbnailHeight,oi=et!=null?et.clientWidth:g,si=d!=null?d.clientWidth:g,gi=yt(c),hi=gi.replace(" hide",""),ci=cr(n.hoveredElement,v),ii=lr(ci);if((i=sj_ce("div",null,hi),i)&&(li=["class","data-tag","data-priority"],li.forEach(function(n){return ui(c,n)?l(i,n,rt(c,n)):null}),st=i,ii&&(i.appendChild(ii),st=ii),ri=c.content,ri?st.appendChild(ri.cloneNode(!0)):ft(st,c,v.encc),b=n.instMetaData,u=n.videoRichHoverMetaData,ct=0,typeof CaptionContainer!=e&&CaptionContainer.init&&CaptionContainer.init(k,i,si,!0,u.capt,n.instMetaData,n.hoveredElement,ht),yi={containerWidth:oi,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at},typeof MultiMotionStaticThumbnail!=e&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(k,i,yi,v,n.instMetaData),ct=MultiMotionStaticThumbnail.clientHeight(k)),pi={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:di,thumbnailWidth:ei,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:nt[k].mmstcnt,clipsCount:u.cc,clipsTimeline:pr(u.ct,u.cc),updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:v.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:v.pcc>0&&u.bci>0?u.bci+v.pcc-1:0,mediaId:u.mid,isSaveable:u.sab,pageoUrl:u.pgurl,query:u.q,enableLoop:u.el,playerEndAction:v.pea},typeof ThumbnailPlayer!=e&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(k,g,n.hoverType,v,i,ht,pi,n.instMetaData),ct+=ThumbnailPlayer.clientHeight(k)),typeof IframeContainer!=e&&IframeContainer.init&&IframeContainer.init(k,i,f,u.q,u.mid,ci,ht,b),ut=null,wt?(ut=t,wi=d!=null?d.clientHeight:Math.max(0,ki-ct),sj_evt.fire(r.HoverCaptionHUpdateEvt,wi)):(lt=ai(f.boundaryElIds),lt||(lt=_d.body),ut=lt),ut)){if(((pt=f.attachInfos)===null||pt===void 0?void 0:pt.length)>0)for(at=0;at<f.attachInfos.length;at++)tt=f.attachInfos[at],tt&&tt.scn&&tt.dpcn&&t&&(it=a(tt.scn,i),fi=a(tt.dpcn,t),it&&fi&&(l(it,"data-priority","2"),fi.appendChild(it),p.push(it),bt(it,!0)));h&&(o=a(dt,i),o&&(w(o,"outer_pc"),ot(h,o,dt,ei),sj_evt.fire(r.OverlaySizeUpdateEvt,g,n.thumbnailHeight)));et&&(s=a(gt,i),s&&ot(et,s,gt,oi));d&&(n.captionSourceEl!=null?v.isCaptionReplaced?ft(d,n.captionSourceEl,v.encc):(vt=sj_ce("div",null,ti),ft(vt,n.captionSourceEl,v.encc),ot(d,vt,ti,0),vi(vt)):(y=a(ni,i),y&&ot(d,y,ni,si)));ot(ut,i,hi,g);br(n.duplicateSourceEl,n.duplicateTargetEl);nu();sj_evt.fire(r.HoverVisible,t,!0);switch(f.interactionType){case VRHEnums.HoverInteractionType.MouseFollow:sj_be(_d,"mousemove",bi);break;case VRHEnums.HoverInteractionType.PopOut:if(!su(t,i,v)){sj_evt.fire(r.HoverCancelEvt);return}}kt(i,v.ic>0);kt(o,v.ic>0);kt(s,v.ic>0)}}}function ot(n,t,i,r){var u=n.firstChild;u&&g(u,i)&&u.parentNode==n&&(n.removeChild(u),u=n.firstElementChild);n.insertBefore(t,u);r>0&&si(t,r);bt(t,!0)}function kt(n,t){n!=null&&(sj_evt.fire("focusChange",n),lt(n,"mouseout",gr),t&&lt(n,"click",ru),et.triggerType==VRHEnums.TriggerType.TabTrigger&&lt(n,"focusout",ar))}function cr(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],g(n,f.target.bcn)&&(e=f.target.tacn,i=pi(n),i&&i.length>0))for(r=0;r<i.length;r++)if(g(i[r],e))return i[r];return null}function lr(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=rt(n,"h"),i&&l(t,"h",i),r=rt(n,"aria-label"),r&&l(t,"aria-label",r),t):null}function ar(n){n&&_d&&_d.activeElement&&sb_st(function(){var n=_d.activeElement;if(!vt(n)){sj_evt.fire(r.HoverStopEvt);return}},10)}function vr(){at===!0?tt||(tt=function(){sj_evt.fire(VRHConsts.StopPlayEvt,b);st();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,b),st());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function yr(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function pr(n,t){if(typeof n!=e&&typeof t!=e&&typeof enableMockImages!==e&&enableMockImages()){var r=n.split(","),i=nr.split(",");return i.length=Math.min(r.length,t),i.join(",")}return n}function wr(n){var o,i,u,s;if(n&&n.length>2){if(o=n[2],i=n[1],!i||!i.containerHeight||!i.containerWidth||!i.videoRichHoverMetaData)return;if(at===!0){sj_evt.fire(VRHConsts.HoverCleanupEvt);return}if(o&&o!==t)dr(i),t==null||t.hasAttribute(gi)||(sj_evt.fire(VRHConsts.StopPlayEvt,b),st()),t=o,et=i,d=i.scaledCanvasEl;else return;if(u=nt[i.containerId],!u)return;f=u;at=!0;tt=null;it!=null&&t.hasAttribute(r.BoundarySizePersistedAttachedStr)&&t!=it&&(v(it,k),it=null,d&&v(d,k));t.hasAttribute(r.BoundarySizeScaleAttachedStr)&&(w(t,k),d&&w(d,k));s=i.hoverDelayMsOverwrite!=null&&!isNaN(i.hoverDelayMsOverwrite)&&i.hoverDelayMsOverwrite>=0?i.hoverDelayMsOverwrite:u.hoverdelayms;sb_st(function(){sj_evt.fire(r.HoverStartEvt,i.instMetaData,i.triggerType);sj_evt.fire(r.AutoPlayNextStatusUpdateEvt,!!(i.triggerType===VRHEnums.TriggerType.AutoplayTrigger&&u.enAutoPlayNext));_w!==_w.parent&&typeof MMMessenger!=e&&MMMessenger.Post(_w.parent,VRHEnums.IframeMessage.PreviewStarted,null);hr(i);tt&&(tt(),tt=null);at=!1},s);kr(i)}}function br(n,t){var i,u,e;if(n!=null&&t!=null){var s=yt(n),o=s.split(" "),r=t;for(i=0;i<o.length;i++)if(u=a(o[i],t),u){r=u;break}ft(r,n,f===null||f===void 0?void 0:f.encc);e=a(di,r);e&&vi(e)}}function kr(n){var i=n.videoRichHoverMetaData,t;i!=null&&(t=n.linkTargetEl,t!=null&&(l(t,"href",i.purl),l(t,"aria-label",i.vt)))}function vi(n){if(t&&t.parentElement&&t.hasAttribute(r.BoundarySizeScaleAttachedStr)){var o=t.parentElement,u=fi(t)[0],f=ut(t),s=ut(o),e=ei("scrollbar",t),i=e!=null?u-e.scrollLeft:u;i<s-i-f&&hi(n,i+f+tr)}}function dr(n){var e=n.containerId,u=nt[e],t,r,i;if(u!=null&&(t=n.videoRichHoverMetaData,t!=null)&&(r=n.playerThumbnailEl,i=n.playerTargetEl,r!=null&&i!=null)){var o=t.thid,s=t.at,h=i.clientWidth,c=i.clientHeight,a=u.pid,f=ThUrlGenerator.NewThumbnailUrl(o,s,h,c,a,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);f!=null&&l(r,"src",f)}}function gr(n){vt(sj_mo(n))||sj_evt.fire(r.HoverStopEvt,n)}function nu(){t&&w(t,"onhov");h&&w(h,"onhov")}function tu(){t&&(v(t,"onhov"),t.hasAttribute(r.BoundarySizePersistedAttachedStr)?it=t:t.hasAttribute(r.BoundarySizeScaleAttachedStr)&&(v(t,k),v(d,k)));h&&v(h,"onhov")}function iu(){t&&w(t,"mmsts")}function yi(){t&&v(t,"mmsts")}function ru(n){var s=sj_et(n),h,u,i,o;if(vt(s)&&!yr(s)&&t&&wi()&&et&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+rt(t,"h"),h=et.hoverType,u=!1,h===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=e&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),u=!0):n.ctrlKey||n.button==1||(i=fu(uu(t,f?f.bindInfos:null)),i&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,i),i.dispatchEvent(o),typeof si_ct=="function"&&si_ct(i)),u=!0),sj_evt.fire(r.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),st(),u)){sj_pd(n);sj_sp(n);return}}function uu(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!g(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function pi(n){return n?n.getElementsByTagName("a"):null}function fu(n){var i=pi(n),t;if(i)for(t=0;t<i.length;t++)if(!vt(i[t]))return i[t];return n}function vt(n){while(n!=null){if(g(n,ki))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function wi(){return i!=null||o!=null||s!=null}function st(){yi();tu();wi()&&(eu()&&sj_evt.fire(r.HoverVisible,t,!1),ou(),sj_evt.fire(VRHConsts.HoverMouseOutEvt,b));sj_ue(_d,"mousemove",bi);b=null;t=null;et=null}function eu(){var n=null,r,t;if(i!=null&&i.parentElement!=null&&(n=i.parentElement,n.removeChild(i)),o!=null&&o.parentElement!=null&&(n=o.parentElement,n.removeChild(o)),s!=null&&s.parentElement!=null&&(n=s.parentElement,n.removeChild(s)),y!=null&&y.parentElement!=null&&(n=y.parentElement,n.removeChild(y)),(p===null||p===void 0?void 0:p.length)>0)for(r=0;r<p.length;r++)t=p[r],(t===null||t===void 0?void 0:t.parentElement)&&(n=t.parentElement,n.removeChild(t));return p=[],n!=null}function ou(){f.encc!==!0&&(i!=null&&(i.innerHTML=null),o!=null&&(o.innerHTML=null),s!=null&&(s.innerHTML=null));i=null;o=null;s=null}function bi(n){if(i){var t=hu(n.clientX,n.clientY);pt(i,t.l,t.t)}}function su(n,t,i){var r=cu(t,n,i);return r?(pt(t,r.l,r.t),!0):!1}function hu(n,t){var r=n+VRHConsts.MouseRightMargin,u=t+VRHConsts.MouseBottomMargin,f=sb_de.clientWidth,s=sb_de.clientHeight,e=i.clientWidth,o=i.clientHeight,h=r+e>f,c=u+o>s;return h&&c?(r=f-e,u=t-o-VRHConsts.MouseTopMargin):h?r=f-e:c&&(u=s-o),{l:r,t:u}}function cu(n,t,i){var o,c,l;if(!i||!n||!t||(o=sr(t,ai(f.boundaryElIds)),!o))return null;var e=lu(o,i),a=oi(t,o,f.sd),r=a[0],u=a[1],s=ut(t),h=wt(t);if(e.l>r+s/2||e.t>u+h/2||e.r<r+s/2||e.b<u+h/2)return null;c=ut(n);l=wt(n);r-=(c-s)/2;r=Math.ceil(r);r=Math.min(r,e.r-c-2);r=Math.max(r,e.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(l-h)/2}return u=Math.floor(u),u=Math.min(u,e.b-l-2),u=Math.max(u,e.t),{l:r,t:u}}function lu(n){var t=n?0:sb_de.scrollLeft,i=n?0:sb_de.scrollTop,r=n.clientWidth,u=n.clientHeight;return{l:t,t:i,r:r,b:u}}var ht="VRTP",ki="vrhc",dt="vrhtpc",gt="vhcic",ni="vrhcs",ti="vrhcac",di="mc_vtvc_meta_w",gi="bpatt",k="scale",e="undefined",nr="0.000,60.000,120.000,180.000",tr=16,u=typeof pMMUtils!=e?pMMUtils:null,ii=typeof SmartEvent!=e?SmartEvent:null,ct=typeof VideoRichHoverUtils!=e?VideoRichHoverUtils:null,r=typeof VRHConsts!=e?VRHConsts:null,c=null,i=null,t=null,o=null,s=null,y=null,h=null,it=null,d=null,p=[],ri=!1,lt=null,ir=null,rt=null,ui=null,l=null,yt=null,pt=null,ut=null,wt=null,fi=null,a=null,ei=null,g=null,bt=null,oi=null,si=null,hi=null,at=!1,w=null,v=null,ft=null,f=null,et,b=null,nt={},tt;n.init=ur;rr()}(VideoRichHover||(VideoRichHover={}))